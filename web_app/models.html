<!-- Model Analysis Panel -->
<section id="models" class="panel">
    <div class="panel-header">
        <h3><i class="fas fa-brain"></i> Model Analysis</h3>
        <div class="actions">
            <button class="btn btn-outline refresh-btn"><i class="fas fa-sync-alt"></i> Refresh</button>
            <button class="close-btn"><i class="fas fa-times"></i></button>
        </div>
    </div>
    
    <!-- Model Selection -->
    <div class="model-selector">
        <div class="model-card-grid">
            <div class="model-select-card active" data-model-id="model-1">
                <div class="model-select-header">
                    <h4>Price Prediction v2.1</h4>
                    <span class="model-tag active">Active</span>
                </div>
                <div class="model-select-meta">
                    <div class="model-meta-item">
                        <span class="meta-label">Type:</span>
                        <span class="meta-value">RandomForest</span>
                    </div>
                    <div class="model-meta-item">
                        <span class="meta-label">Accuracy:</span>
                        <span class="meta-value">85.3%</span>
                    </div>
                    <div class="model-meta-item">
                        <span class="meta-label">Last Updated:</span>
                        <span class="meta-value">Jul 25, 2025</span>
                    </div>
                </div>
            </div>
            
            <div class="model-select-card" data-model-id="model-2">
                <div class="model-select-header">
                    <h4>Market Sentiment v1.3</h4>
                    <span class="model-tag active">Active</span>
                </div>
                <div class="model-select-meta">
                    <div class="model-meta-item">
                        <span class="meta-label">Type:</span>
                        <span class="meta-value">LSTM</span>
                    </div>
                    <div class="model-meta-item">
                        <span class="meta-label">Accuracy:</span>
                        <span class="meta-value">82.7%</span>
                    </div>
                    <div class="model-meta-item">
                        <span class="meta-label">Last Updated:</span>
                        <span class="meta-value">Jul 23, 2025</span>
                    </div>
                </div>
            </div>
            
            <div class="model-select-card" data-model-id="model-3">
                <div class="model-select-header">
                    <h4>Trend Analysis v0.9</h4>
                    <span class="model-tag testing">Testing</span>
                </div>
                <div class="model-select-meta">
                    <div class="model-meta-item">
                        <span class="meta-label">Type:</span>
                        <span class="meta-value">XGBoost</span>
                    </div>
                    <div class="model-meta-item">
                        <span class="meta-label">Accuracy:</span>
                        <span class="meta-value">87.9%</span>
                    </div>
                    <div class="model-meta-item">
                        <span class="meta-label">Last Updated:</span>
                        <span class="meta-value">Jul 28, 2025</span>
                    </div>
                </div>
            </div>
            
            <div class="model-select-card archived" data-model-id="model-4">
                <div class="model-select-header">
                    <h4>Price Prediction v1.5</h4>
                    <span class="model-tag archived">Archived</span>
                </div>
                <div class="model-select-meta">
                    <div class="model-meta-item">
                        <span class="meta-label">Type:</span>
                        <span class="meta-value">RandomForest</span>
                    </div>
                    <div class="model-meta-item">
                        <span class="meta-label">Accuracy:</span>
                        <span class="meta-value">81.1%</span>
                    </div>
                    <div class="model-meta-item">
                        <span class="meta-label">Archived:</span>
                        <span class="meta-value">Jul 20, 2025</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Model Detail View -->
    <div class="model-detail" id="model-detail">
        <div class="model-detail-header">
            <h4 id="model-name">Price Prediction v2.1</h4>
            <div class="model-actions">
                <button class="btn btn-sm" id="use-model">Use This Model</button>
                <button class="btn btn-outline btn-sm" id="compare-model">Compare</button>
            </div>
        </div>
        
        <!-- Model Summary -->
        <div class="model-summary">
            <div class="summary-card">
                <div class="summary-value">85.3%</div>
                <div class="summary-label">Accuracy</div>
            </div>
            <div class="summary-card">
                <div class="summary-value">83.7%</div>
                <div class="summary-label">Precision</div>
            </div>
            <div class="summary-card">
                <div class="summary-value">79.2%</div>
                <div class="summary-label">Recall</div>
            </div>
            <div class="summary-card">
                <div class="summary-value">81.4%</div>
                <div class="summary-label">F1 Score</div>
            </div>
        </div>
        
        <!-- Tabs for Model Details -->
        <div class="tabs">
            <div class="tab active" data-tab="performance">Performance</div>
            <div class="tab" data-tab="features">Feature Importance</div>
            <div class="tab" data-tab="settings">Settings</div>
            <div class="tab advanced-tab" data-tab="technical">Technical Details</div>
        </div>
        
        <!-- Performance Tab -->
        <div class="tab-content active" id="performance">
            <div class="chart-container large">
                <h4>Performance History</h4>
                <canvas id="performance-history-chart"></canvas>
            </div>
            
            <div class="metrics-grid">
                <div class="metric-detail-card">
                    <div class="metric-detail-header">
                        <h4>Confusion Matrix</h4>
                    </div>
                    <div class="chart-container">
                        <canvas id="confusion-matrix-chart"></canvas>
                    </div>
                </div>
                
                <div class="metric-detail-card">
                    <div class="metric-detail-header">
                        <h4>ROC Curve</h4>
                    </div>
                    <div class="chart-container">
                        <canvas id="roc-curve-chart"></canvas>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Feature Importance Tab -->
        <div class="tab-content" id="features">
            <div class="chart-container large">
                <h4>Top 10 Feature Importance</h4>
                <canvas id="feature-importance-chart"></canvas>
            </div>
            
            <div class="table-container mt-4">
                <table class="table" id="feature-table">
                    <thead>
                        <tr>
                            <th>Feature</th>
                            <th>Importance</th>
                            <th>Correlation</th>
                            <th>Type</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>close_price_7d_trend</td>
                            <td>
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: 85%"></div>
                                </div>
                                <span class="progress-text">0.85</span>
                            </td>
                            <td>0.73</td>
                            <td>Technical</td>
                        </tr>
                        <tr>
                            <td>volume_change_rate</td>
                            <td>
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: 78%"></div>
                                </div>
                                <span class="progress-text">0.78</span>
                            </td>
                            <td>0.69</td>
                            <td>Technical</td>
                        </tr>
                        <tr>
                            <td>rsi_14</td>
                            <td>
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: 76%"></div>
                                </div>
                                <span class="progress-text">0.76</span>
                            </td>
                            <td>0.65</td>
                            <td>Technical</td>
                        </tr>
                        <tr>
                            <td>sentiment_score</td>
                            <td>
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: 72%"></div>
                                </div>
                                <span class="progress-text">0.72</span>
                            </td>
                            <td>0.63</td>
                            <td>Sentiment</td>
                        </tr>
                        <tr>
                            <td>macd_signal</td>
                            <td>
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: 65%"></div>
                                </div>
                                <span class="progress-text">0.65</span>
                            </td>
                            <td>0.58</td>
                            <td>Technical</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            
            <div class="advanced-feature-section">
                <div class="section-toggle">
                    <h4>Advanced Feature Analysis</h4>
                    <button class="toggle-btn" id="toggle-advanced-features">
                        <i class="fas fa-chevron-down"></i>
                    </button>
                </div>
                
                <div class="advanced-content hidden" id="advanced-feature-content">
                    <div class="chart-container">
                        <h4>Feature Correlation Matrix</h4>
                        <canvas id="feature-correlation-chart"></canvas>
                    </div>
                    
                    <div class="chart-container mt-4">
                        <h4>SHAP Values</h4>
                        <canvas id="shap-values-chart"></canvas>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Settings Tab -->
        <div class="tab-content" id="settings">
            <div class="settings-grid">
                <div class="settings-card">
                    <h4>Basic Settings</h4>
                    <div class="settings-form">
                        <div class="form-group">
                            <label for="model-display-name">Display Name</label>
                            <input type="text" id="model-display-name" class="form-input" value="Price Prediction v2.1">
                        </div>
                        
                        <div class="form-group">
                            <label for="model-description">Description</label>
                            <textarea id="model-description" class="form-input" rows="3">Price prediction model using RandomForest algorithm with technical indicators and sentiment analysis.</textarea>
                        </div>
                        
                        <div class="form-group">
                            <label for="model-status">Status</label>
                            <select id="model-status" class="form-input form-select">
                                <option value="active" selected>Active</option>
                                <option value="testing">Testing</option>
                                <option value="archived">Archived</option>
                            </select>
                        </div>
                    </div>
                </div>
                
                <div class="settings-card">
                    <h4>Prediction Settings</h4>
                    <div class="settings-form">
                        <div class="form-group">
                            <label for="default-horizon">Default Prediction Horizon</label>
                            <select id="default-horizon" class="form-input form-select">
                                <option value="1d">1 Day</option>
                                <option value="3d" selected>3 Days</option>
                                <option value="7d">7 Days</option>
                                <option value="14d">14 Days</option>
                                <option value="30d">30 Days</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="confidence-threshold">Confidence Threshold</label>
                            <input type="range" id="confidence-threshold" class="form-range" min="50" max="95" step="5" value="70">
                            <div class="range-value">70%</div>
                        </div>
                        
                        <div class="form-group">
                            <div class="checkbox-group">
                                <label>
                                    <input type="checkbox" id="show-confidence" checked>
                                    Show confidence interval
                                </label>
                                <label>
                                    <input type="checkbox" id="show-history" checked>
                                    Include historical data
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="advanced-settings-section">
                <div class="section-toggle">
                    <h4>Advanced Settings</h4>
                    <button class="toggle-btn" id="toggle-advanced-settings">
                        <i class="fas fa-chevron-down"></i>
                    </button>
                </div>
                
                <div class="advanced-content hidden" id="advanced-settings-content">
                    <div class="settings-grid">
                        <div class="settings-card">
                            <h4>Model Parameters</h4>
                            <div class="settings-form">
                                <div class="form-group">
                                    <label for="n-estimators">Number of Estimators</label>
                                    <input type="number" id="n-estimators" class="form-input" value="100" min="10" max="1000">
                                </div>
                                
                                <div class="form-group">
                                    <label for="max-depth">Max Depth</label>
                                    <input type="number" id="max-depth" class="form-input" value="10" min="1" max="50">
                                </div>
                                
                                <div class="form-group">
                                    <label for="min-samples-split">Min Samples Split</label>
                                    <input type="number" id="min-samples-split" class="form-input" value="2" min="2" max="20">
                                </div>
                            </div>
                        </div>
                        
                        <div class="settings-card">
                            <h4>Feature Engineering</h4>
                            <div class="settings-form">
                                <div class="form-group">
                                    <label>Feature Categories</label>
                                    <div class="checkbox-group">
                                        <label>
                                            <input type="checkbox" id="use-technical" checked>
                                            Technical Indicators
                                        </label>
                                        <label>
                                            <input type="checkbox" id="use-sentiment" checked>
                                            Sentiment Analysis
                                        </label>
                                        <label>
                                            <input type="checkbox" id="use-fundamental">
                                            Fundamental Data
                                        </label>
                                        <label>
                                            <input type="checkbox" id="use-market">
                                            Market Correlation
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="form-actions">
                <button class="btn btn-outline">Cancel</button>
                <button class="btn">Save Changes</button>
            </div>
        </div>
        
        <!-- Technical Details Tab (Advanced) -->
        <div class="tab-content" id="technical">
            <div class="technical-section">
                <h4>Model Architecture</h4>
                <div class="code-block">
                    <pre><code>RandomForestClassifier(
    n_estimators=100,
    max_depth=10,
    min_samples_split=2,
    min_samples_leaf=1,
    bootstrap=True,
    criterion='gini',
    max_features='sqrt',
    random_state=42
)</code></pre>
                </div>
                
                <h4>Training Configuration</h4>
                <div class="code-block">
                    <pre><code>train_config = {
    'train_test_split': 0.8,
    'validation_size': 0.2,
    'cv_folds': 5,
    'hyperparameter_tuning': True,
    'early_stopping_rounds': 10
}</code></pre>
                </div>
                
                <h4>Feature Engineering Pipeline</h4>
                <div class="code-block">
                    <pre><code>feature_pipeline = [
    ('preprocessing', StandardScaler()),
    ('feature_selection', SelectKBest(k=25)),
    ('dimensionality_reduction', PCA(n_components=15))
]</code></pre>
                </div>
            </div>
            
            <div class="metrics-grid">
                <div class="metric-detail-card">
                    <div class="metric-detail-header">
                        <h4>Validation Curve</h4>
                    </div>
                    <div class="chart-container">
                        <canvas id="validation-curve-chart"></canvas>
                    </div>
                </div>
                
                <div class="metric-detail-card">
                    <div class="metric-detail-header">
                        <h4>Learning Curve</h4>
                    </div>
                    <div class="chart-container">
                        <canvas id="learning-curve-chart"></canvas>
                    </div>
                </div>
            </div>
            
            <div class="technical-section">
                <h4>Model Version History</h4>
                <div class="table-container">
                    <table class="table" id="version-history-table">
                        <thead>
                            <tr>
                                <th>Version</th>
                                <th>Date</th>
                                <th>Accuracy</th>
                                <th>Changes</th>
                                <th>Author</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>v2.1</td>
                                <td>Jul 25, 2025</td>
                                <td>85.3%</td>
                                <td>Added sentiment analysis features</td>
                                <td>John S.</td>
                            </tr>
                            <tr>
                                <td>v2.0</td>
                                <td>Jul 18, 2025</td>
                                <td>83.7%</td>
                                <td>Increased n_estimators to 100</td>
                                <td>Maria T.</td>
                            </tr>
                            <tr>
                                <td>v1.5</td>
                                <td>Jul 10, 2025</td>
                                <td>81.1%</td>
                                <td>Initial production release</td>
                                <td>Alex W.</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Additional CSS styles for model analysis panel -->
<style>
    /* Model selector */
    .model-selector {
        margin-bottom: 2rem;
    }
    
    .model-card-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
        gap: 1rem;
    }
    
    .model-select-card {
        background: white;
        border-radius: var(--radius);
        padding: 1.5rem;
        border: 2px solid transparent;
        transition: var(--transition);
        cursor: pointer;
    }
    
    .model-select-card:hover {
        border-color: var(--primary-light);
        transform: translateY(-2px);
    }
    
    .model-select-card.active {
        border-color: var(--primary);
        background: rgba(79, 70, 229, 0.03);
    }
    
    .model-select-card.archived {
        opacity: 0.7;
    }
    
    .model-select-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 1rem;
    }
    
    .model-select-header h4 {
        font-weight: 600;
        color: var(--text-primary);
        margin: 0;
    }
    
    .model-tag {
        padding: 0.25rem 0.75rem;
        border-radius: 50px;
        font-size: 0.75rem;
        font-weight: 600;
    }
    
    .model-tag.active {
        background: rgba(16, 185, 129, 0.1);
        color: var(--success);
    }
    
    .model-tag.testing {
        background: rgba(79, 70, 229, 0.1);
        color: var(--primary);
    }
    
    .model-tag.archived {
        background: rgba(107, 114, 128, 0.1);
        color: var(--text-muted);
    }
    
    .model-select-meta {
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
    }
    
    .model-meta-item {
        display: flex;
        justify-content: space-between;
        font-size: 0.875rem;
    }
    
    .meta-label {
        color: var(--text-secondary);
    }
    
    .meta-value {
        color: var(--text-primary);
        font-weight: 500;
    }
    
    /* Model detail */
    .model-detail {
        background: white;
        border-radius: var(--radius);
        padding: 1.5rem;
        box-shadow: var(--shadow-sm);
    }
    
    .model-detail-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 1.5rem;
    }
    
    .model-detail-header h4 {
        font-size: 1.25rem;
        font-weight: 600;
        color: var(--text-primary);
        margin: 0;
    }
    
    .model-actions {
        display: flex;
        gap: 0.5rem;
    }
    
    .btn-sm {
        padding: 0.375rem 0.75rem;
        font-size: 0.875rem;
    }
    
    /* Model summary */
    .model-summary {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: 1rem;
        margin-bottom: 2rem;
    }
    
    .summary-card {
        background: rgba(79, 70, 229, 0.03);
        border-radius: var(--radius);
        padding: 1rem;
        text-align: center;
    }
    
    .summary-value {
        font-size: 1.5rem;
        font-weight: 600;
        color: var(--primary);
        margin-bottom: 0.25rem;
    }
    
    .summary-label {
        font-size: 0.875rem;
        color: var(--text-secondary);
    }
    
    /* Tab styles */
    .advanced-tab {
        background: rgba(79, 70, 229, 0.03);
        color: var(--primary);
        font-weight: 600;
    }
    
    /* Settings grid */
    .settings-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 1.5rem;
        margin-bottom: 1.5rem;
    }
    
    .settings-card {
        background: rgba(79, 70, 229, 0.03);
        border-radius: var(--radius);
        padding: 1.5rem;
    }
    
    .settings-card h4 {
        margin-top: 0;
        margin-bottom: 1rem;
        color: var(--text-primary);
    }
    
    .settings-form {
        display: flex;
        flex-direction: column;
        gap: 1rem;
    }
    
    .range-value {
        text-align: center;
        margin-top: 0.25rem;
        font-weight: 500;
    }
    
    .form-actions {
        display: flex;
        justify-content: flex-end;
        gap: 1rem;
        margin-top: 1.5rem;
    }
    
    /* Advanced sections */
    .advanced-feature-section,
    .advanced-settings-section {
        margin-top: 2rem;
    }
    
    .section-toggle {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 1rem;
        background: rgba(79, 70, 229, 0.03);
        border-radius: var(--radius);
        cursor: pointer;
    }
    
    .section-toggle h4 {
        margin: 0;
        color: var(--primary);
    }
    
    .toggle-btn {
        background: transparent;
        border: none;
        color: var(--primary);
        cursor: pointer;
        width: 30px;
        height: 30px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 50%;
        transition: var(--transition);
    }
    
    .toggle-btn:hover {
        background: rgba(79, 70, 229, 0.1);
    }
    
    .advanced-content {
        padding: 1.5rem;
        border: 1px solid rgba(79, 70, 229, 0.2);
        border-radius: 0 0 var(--radius) var(--radius);
        margin-top: -5px;
    }
    
    .advanced-content.hidden {
        display: none;
    }
    
    /* Technical section */
    .technical-section {
        margin-bottom: 2rem;
    }
    
    .technical-section h4 {
        margin-bottom: 1rem;
    }
    
    .code-block {
        background: #f8f9fa;
        border-radius: var(--radius);
        padding: 1rem;
        margin-bottom: 1.5rem;
        overflow-x: auto;
    }
    
    .code-block pre {
        margin: 0;
        font-family: 'Consolas', 'Monaco', monospace;
        font-size: 0.875rem;
        color: #374151;
    }
    
    /* Progress bar with text */
    .progress-text {
        margin-left: 0.5rem;
        font-size: 0.875rem;
        color: var(--text-secondary);
    }
    
    /* Responsive adjustments */
    @media (max-width: 768px) {
        .model-summary {
            grid-template-columns: repeat(2, 1fr);
        }
        
        .model-card-grid {
            grid-template-columns: 1fr;
        }
    }
</style>
